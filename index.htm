<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Street Cricket Scorer</title>

<!-- version: 2026-01-04 -->

<script src="https://cdn.tailwindcss.com"></script>
<script src="https://unpkg.com/react@18/umd/react.development.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>

<body class="bg-gray-200">
<div id="root"></div>

<script type="text/babel">
function App() {

  /* ================= MATCH RULES ================= */
  const MAX_OVERS = 15;
  const MAX_BALLS = MAX_OVERS * 6; // 90
  const MAX_WICKETS = 2;

  /* ================= CORE ================= */
  const [screen, setScreen] = React.useState("setup");
  const [day, setDay] = React.useState(1);
  const [dayEnded, setDayEnded] = React.useState(false);

  /* ================= TEAMS ================= */
  const [teamA, setTeamA] = React.useState("Team A");
  const [teamB, setTeamB] = React.useState("Team B");
  const [squadA, setSquadA] = React.useState(["","",""]);
  const [squadB, setSquadB] = React.useState(["","",""]);

  /* ================= TOSS ================= */
  const [tossWinner, setTossWinner] = React.useState(null);
  const [tossDecision, setTossDecision] = React.useState(null);
  const [battingTeam, setBattingTeam] = React.useState(null);
  const [bowlingTeam, setBowlingTeam] = React.useState(null);

  /* ================= INNINGS ================= */
  const [innings, setInnings] = React.useState(1);
  const [firstInningsScore, setFirstInningsScore] = React.useState(null);

  /* ================= SCORE ================= */
  const [runs, setRuns] = React.useState(0);
  const [balls, setBalls] = React.useState(0);
  const [wickets, setWickets] = React.useState(0);

  const [striker, setStriker] = React.useState("");
  const [nonStriker, setNonStriker] = React.useState("");
  const [bowler, setBowler] = React.useState("");

  /* ================= MATCH END ================= */
  const [matchEnded, setMatchEnded] = React.useState(false);
  const [resultText, setResultText] = React.useState("");

  const overs = `${Math.floor(balls/6)}.${balls%6}`;

  /* ================= HELPERS ================= */
  function swapStrike() {
    setStriker(nonStriker);
    setNonStriker(striker);
  }

  function doToss() {
    setTossWinner(Math.random() < 0.5 ? teamA : teamB);
  }

  function decide(choice) {
    setTossDecision(choice);
    if (choice === "Bat") {
      setBattingTeam(tossWinner);
      setBowlingTeam(tossWinner === teamA ? teamB : teamA);
    } else {
      setBattingTeam(tossWinner === teamA ? teamB : teamA);
      setBowlingTeam(tossWinner);
    }
  }

  /* ================= SCORING ================= */
  function scoreRun(r) {
    if (dayEnded || matchEnded) return;
    if (balls >= MAX_BALLS) return;
    if (wickets >= MAX_WICKETS) return;

    const newRuns = runs + r;
    const newBalls = balls + 1;

    setRuns(newRuns);
    setBalls(newBalls);

    if (r % 2 === 1) swapStrike();

    if (newBalls % 6 === 0) swapStrike();

    // Chase completed
    if (innings === 2 && newRuns > firstInningsScore) {
      decideResult(newRuns);
    }

    // Overs completed
    if (newBalls >= MAX_BALLS) {
      endInnings();
    }
  }

  function wicket() {
    if (dayEnded || matchEnded) return;
    if (wickets >= MAX_WICKETS) return;

    const newWickets = wickets + 1;
    const newBalls = balls + 1;

    setWickets(newWickets);
    setBalls(newBalls);
    setStriker("New Batsman");

    if (newWickets >= MAX_WICKETS) {
      endInnings();
    }
  }

  /* ================= INNINGS END ================= */
  function endInnings() {
    setDayEnded(true);

    if (innings === 1) {
      setFirstInningsScore(runs);

      setTimeout(() => {
        setInnings(2);
        setRuns(0);
        setBalls(0);
        setWickets(0);
        setDayEnded(false);

        // Swap teams
        setBattingTeam(bowlingTeam);
        setBowlingTeam(battingTeam);

        const nextBat = bowlingTeam === teamA ? squadA : squadB;
        const nextBowl = battingTeam === teamA ? squadA : squadB;

        setStriker(nextBat[0]);
        setNonStriker(nextBat[1]);
        setBowler(nextBowl[0]);
      }, 500);

    } else {
      decideResult(runs);
    }
  }

  /* ================= RESULT ================= */
  function decideResult(finalRuns) {
    setMatchEnded(true);

    if (finalRuns > firstInningsScore) {
      setResultText(`${battingTeam} won the match`);
    } else if (finalRuns < firstInningsScore) {
      setResultText(`${bowlingTeam} won the match`);
    } else {
      setResultText("Match Drawn");
    }
  }

  /* ================= SETUP ================= */
  if (screen === "setup") {
    return (
      <div className="min-h-screen flex justify-center">
        <div className="w-full max-w-md bg-white p-4 space-y-4">
          <h1 className="text-xl font-bold text-center">Match Setup</h1>

          <input className="border p-2 w-full" value={teamA} onChange={e=>setTeamA(e.target.value)} />
          {squadA.map((p,i)=>(
            <input key={i} className="border p-2 w-full"
              placeholder={`Team A Player ${i+1}`}
              value={p}
              onChange={e=>{const c=[...squadA];c[i]=e.target.value;setSquadA(c);}} />
          ))}

          <input className="border p-2 w-full" value={teamB} onChange={e=>setTeamB(e.target.value)} />
          {squadB.map((p,i)=>(
            <input key={i} className="border p-2 w-full"
              placeholder={`Team B Player ${i+1}`}
              value={p}
              onChange={e=>{const c=[...squadB];c[i]=e.target.value;setSquadB(c);}} />
          ))}

          {!tossWinner && (
            <button onClick={doToss} className="w-full bg-blue-600 text-white py-2">
              Toss
            </button>
          )}

          {tossWinner && !tossDecision && (
            <>
              <p className="text-center font-semibold">{tossWinner} won the toss</p>
              <button onClick={()=>decide("Bat")} className="w-full bg-green-600 text-white py-2">Bat</button>
              <button onClick={()=>decide("Bowl")} className="w-full bg-red-600 text-white py-2">Bowl</button>
            </>
          )}

          {battingTeam && (
            <>
              <select className="border p-2 w-full" onChange={e=>setStriker(e.target.value)}>
                <option>Select Striker</option>
                {(battingTeam===teamA?squadA:squadB).map(p=><option key={p}>{p}</option>)}
              </select>

              <select className="border p-2 w-full" onChange={e=>setNonStriker(e.target.value)}>
                <option>Select Non-Striker</option>
                {(battingTeam===teamA?squadA:squadB).filter(p=>p!==striker).map(p=><option key={p}>{p}</option>)}
              </select>

              <select className="border p-2 w-full" onChange={e=>setBowler(e.target.value)}>
                <option>Select Bowler</option>
                {(bowlingTeam===teamA?squadA:squadB).map(p=><option key={p}>{p}</option>)}
              </select>

              <button onClick={()=>setScreen("scoring")}
                className="w-full bg-teal-600 text-white py-2">
                Start Match
              </button>
            </>
          )}
        </div>
      </div>
    );
  }

  /* ================= SCORING ================= */
  return (
    <div className="min-h-screen bg-black text-white flex justify-center">
      <div className="w-full max-w-md">

        <div className="bg-red-600 p-3 text-center">
          Day {day} ¬∑ Innings {innings}
          {innings === 2 && firstInningsScore !== null && (
            <div className="text-sm">Target {firstInningsScore + 1}</div>
          )}
        </div>

        <div className="p-4 text-center bg-gray-900">
          <h2 className="text-4xl">{runs}/{wickets}</h2>
          <p className="text-sm">Overs {overs}</p>
        </div>

        <div className="bg-gray-800 p-3 flex justify-between">
          <span className="text-green-400">üèè {striker}</span>
          <span>{nonStriker}</span>
          <span>üéØ {bowler}</span>
        </div>

        <div className="grid grid-cols-3 bg-white text-black">
          {[0,1,2,3,4,6].map(r=>(
            <button key={r}
              disabled={dayEnded || matchEnded}
              onClick={()=>scoreRun(r)}
              className="py-6 border text-xl font-bold disabled:bg-gray-300">
              {r===4?"FOUR":r===6?"SIX":r}
            </button>
          ))}
          <button disabled={dayEnded || matchEnded}
            onClick={wicket}
            className="py-6 border bg-red-500 text-white disabled:bg-gray-400">
            OUT
          </button>
        </div>

        {!dayEnded && !matchEnded ? (
          <button onClick={()=>setDayEnded(true)}
            className="w-full py-3 bg-yellow-600 font-semibold">
            End Day
          </button>
        ) : dayEnded && !matchEnded ? (
          <button onClick={()=>{setDay(day+1);setDayEnded(false);}}
            className="w-full py-3 bg-green-600 font-semibold">
            Start Day {day+1}
          </button>
        ) : null}

        {matchEnded && (
          <div className="bg-green-600 text-white text-center p-4 text-xl font-bold">
            {resultText}
          </div>
        )}

      </div>
    </div>
  );
}

ReactDOM.createRoot(document.getElementById("root")).render(<App />);
</script>
</body>
</html>
